# Maintainer: Timo Ter√§s <timo.teras@iki.fi>
pkgname=rameplayer-utils
pkgver=0.7.7
pkgrel=0
pkgdesc="Rameplayer Backend"
url="https://github.com/rameplayerorg/rameplayer-utils"
arch="armhf"
license="GPLv2"
depends="mosquitto ttf-freefont"
makedepends="raspberrypi-dev freetype-dev mosquitto-dev"
install=""
subpackages=""

source="$pkgname-$pkgver.tar.gz::https://github.com/rameplayerorg/rameplayer-utils/archive/v$pkgver.tar.gz
	rameclock.rules
	rameclock-button.udev
	rameclock-button.initd
	rameclock-led.udev
	rameclock-led.initd
	"
builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$builddir"
	cmake . && make
}

package() {
	cd "$builddir"
	make install DESTDIR="$pkgdir"

	install -D -m 644 "$srcdir"/rameclock.rules "$pkgdir"/lib/udev/rules.d/90-rameclock.rules

	install -D "$srcdir"/rameclock-button.udev "$pkgdir"/lib/udev/rameclock-button
	install -D "$srcdir"/rameclock-button.initd "$pkgdir"/etc/init.d/rameclock-button

	install -D "$srcdir"/rameclock-led.udev "$pkgdir"/lib/udev/rameclock-led
	install -D "$srcdir"/rameclock-led.initd "$pkgdir"/etc/init.d/rameclock-led
}

sha512sums="731b6f8578d844d1ba9accee4c09570ab2e939220e5019e0019ef9e4298a210e8eba0bf2a03f151fb1b796b6a4a23f33ea309dbd8e6ea18d196898d861bc8981  rameplayer-utils-0.7.7.tar.gz
40020da3df20ae1ca15826f8779199e1342534650c16adfc7c9fe5b98cb170853ec6ab9c6b1385cdbd0e16ffe4d5a0b34bbb7c3c4857ec11e9f9dec732dfb703  rameclock.rules
05f0c7171070c36b096ba331bd3b969cbc6728fd1e9f7ccb68cd6b2f92ab3d819bb72aeb70f0d200a356180804b9c409fe6c8ecca83ecb5c7205518c58ee1897  rameclock-button.udev
07da0037a31b19cbf3fae1558bb8ac45928546d734c0ebf83500c83ce5b96c2864ac6892376caa7171f205c666e7281c1de5b6809b6a4bd5d2e7fbf1b291b572  rameclock-button.initd
47f940f8ce21904bd4dc5373d85750bbe03917e4c2e747e9217f3766a6797017eefd433e5c69477edecc60199b105e8f7aac8c76656da362992311358345c8e6  rameclock-led.udev
d3b51a8aa37204a097f66a884ed11c6d19267c2f784ae24d09ec36dc282369d0bc53eb1be11d2ae21f5329bc760f7c1aa5bb2dadd7979b74058b26d911e6bc7f  rameclock-led.initd"
