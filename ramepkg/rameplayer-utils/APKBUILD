# Maintainer: Timo Ter√§s <timo.teras@iki.fi>
pkgname=rameplayer-utils
pkgver=0.6.5
pkgrel=0
pkgdesc="Rameplayer Backend"
url="https://github.com/rameplayerorg/rameplayer-utils"
arch="armhf"
license="GPLv2"
depends="mosquitto ttf-freefont"
makedepends="raspberrypi-dev freetype-dev mosquitto-dev"
install=""
subpackages=""

source="$pkgname-$pkgver.tar.gz::https://github.com/rameplayerorg/rameplayer-utils/archive/v$pkgver.tar.gz
	rameclock.rules
	rameclock-button.udev
	rameclock-button.initd
	rameclock-led.udev
	rameclock-led.initd
	"
builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$builddir"
	cmake . && make
}

package() {
	cd "$builddir"
	make install DESTDIR="$pkgdir"

	install -D -m 644 "$srcdir"/rameclock.rules "$pkgdir"/lib/udev/rules.d/90-rameclock.rules

	install -D "$srcdir"/rameclock-button.udev "$pkgdir"/lib/udev/rameclock-button
	install -D "$srcdir"/rameclock-button.initd "$pkgdir"/etc/init.d/rameclock-button

	install -D "$srcdir"/rameclock-led.udev "$pkgdir"/lib/udev/rameclock-led
	install -D "$srcdir"/rameclock-led.initd "$pkgdir"/etc/init.d/rameclock-led
}

md5sums="da079eebf442472e3df5fa5433b15afd  rameplayer-utils-0.6.5.tar.gz
464fc132600cad60db9e0e0c2621d935  rameclock.rules
4aae2e0e0d80cddab56a8e1b1214aecf  rameclock-button.udev
49ba6a840878ed433506afc8a5d213fd  rameclock-button.initd
a8eede2049e70815c974ec1cb6427094  rameclock-led.udev
158ea3aa859045dc3824bb5012196515  rameclock-led.initd"
sha256sums="54870e58983a58104cf26182d317a08ef76ab764331e0e697d1015bedc05938d  rameplayer-utils-0.6.5.tar.gz
29fe74f39d9bfd6f52dabc1c7517c6a8d1f8d5c8a9a9b68e0269a81f2890b68d  rameclock.rules
2bfe3c87094a866c433d40d72833b8449ea179be5c6c8a114ee53c35b9828a53  rameclock-button.udev
98825e8f04ab11448c05597283f4ed2708c61eabcdfe016be4798b28c073e473  rameclock-button.initd
6bdf7e1cd2ed6a33456ab99b7fcb9c24d944ad4f9292dddf98eaa17a521f3892  rameclock-led.udev
135e35c569e2d711c44f583a3f56d4d616ce73f4a85c5d4892d8e311542949a4  rameclock-led.initd"
sha512sums="a74c713b0f6482783650ff83196dd7b8adeb5b70d71e276946166894281727d0b0eb7efc416f9e51c963709c8783bd7b19391b22860fe90ea3c79dc88e84029a  rameplayer-utils-0.6.5.tar.gz
4d1db107e5066fa7ecbf38ea2486ee2c1e05048d92ab49e4d8bf866db4a8ad4c1185ec25f634ad314d1206accd7d8d2f5e6e5cf4b15f66a0dc4def9cc442c553  rameclock.rules
05f0c7171070c36b096ba331bd3b969cbc6728fd1e9f7ccb68cd6b2f92ab3d819bb72aeb70f0d200a356180804b9c409fe6c8ecca83ecb5c7205518c58ee1897  rameclock-button.udev
07da0037a31b19cbf3fae1558bb8ac45928546d734c0ebf83500c83ce5b96c2864ac6892376caa7171f205c666e7281c1de5b6809b6a4bd5d2e7fbf1b291b572  rameclock-button.initd
83a59575155a64cd15f1dd95fc25da0760a82ec4423753ccff834801ff779529ebebe8566d44bc1414e458a5d983dbb5ae2ab75f7edcb39566cfbc7537bf00b0  rameclock-led.udev
d3b51a8aa37204a097f66a884ed11c6d19267c2f784ae24d09ec36dc282369d0bc53eb1be11d2ae21f5329bc760f7c1aa5bb2dadd7979b74058b26d911e6bc7f  rameclock-led.initd"
