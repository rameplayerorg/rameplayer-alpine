# Maintainer: Timo Ter√§s <timo.teras@iki.fi>
pkgname=rameplayer-backend
pkgver=1.1.0
#_commitid=
pkgrel=0
pkgdesc="Rameplayer Backend"
url="https://github.com/rameplayerorg/rameplayer-backend"
arch="noarch"
license="GPLv2"
depends="
	lua5.3 lua5.3-cjson lua5.3-penlight lua5.3-posix lua5.3-cqueues lua5.3-curl
	lua5.3-ldbus lua5.3-socket lua5.3-evdev lua5.3-cqueues-pushy lua5.3-lunix
	dbus omxplayer eudev ffmpeg rameplayer-utils fbida-fbi>=2.12
	"
makedepends=""
install=""
subpackages=""

source="$pkgname-$pkgver.tar.gz::https://github.com/rameplayerorg/rameplayer-backend/archive/${_commitid:-v$pkgver}.tar.gz
	"
_srcdir="$srcdir"/$pkgname-${_commitid:-$pkgver}

prepare() {
	sed -e s/'"development", "Backend version"/"'"$pkgver"'", "Backend version"/g' -i $_srcdir/rame/rame.lua
}

build() {
	:
}

package() {
	mkdir -p "$pkgdir"/usr/share/$pkgname/rame "$pkgdir"/usr/share/$pkgname/plugins
	install -m755 "$_srcdir"/*.lua "$pkgdir"/usr/share/$pkgname/
	install -m755 "$_srcdir"/rame/*.lua "$pkgdir"/usr/share/$pkgname/rame/
	install -m755 "$_srcdir"/plugins/*.lua "$pkgdir"/usr/share/$pkgname/plugins/
}

md5sums="bec72b2f1361dbfeb9ab9aa8678054ac  rameplayer-backend-1.1.0.tar.gz"
sha256sums="9ca20d00ba82298b6a7725460c7034cd35b955e2a0cd95894d24c2fc65933d85  rameplayer-backend-1.1.0.tar.gz"
sha512sums="aa59bab2556d97e68fec42286bddb7949cd3d1351d8bf67cf7f7cca1ad314f74e53e0a7fcb87dd424f7b8622a8fdd0088c284f8591a495028d9bb5e707d6fe4f  rameplayer-backend-1.1.0.tar.gz"
